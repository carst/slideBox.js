function createState(e,t,i){return{path:e,hash:t,title:i}}function getState(){var e=window.location.pathname,t=window.location.search.slice(1),i=window.location.hash.substring(1),o=document.title,n=createState(e,i,o);return debug&&(console.log("indexPath: "+e),console.log("hash: "+i),console.log("indexTitle: "+o)),n}function createPath(e,t){var i=e.split("/"),o=i.length;return e+t+"/"}function loadState(e){var t=e.path,i=e.title;debug&&(console.log("itemPath = "+t),console.log("itemTitle = "+i)),""!==t&&history.pushState("",i,t),document.title=i}function resetState(){document.location.hash="",history.pushState("",indexTitle,indexPath),document.title=indexTitle}function setScroll(e){var t=e.parent();e.hasClass("box-has-content")?(t.addClass("allow-scroll"),debug&&console.log("hello there")):t.removeClass("allow-scroll")}function setSlideBg(e,t){function i(e){var i,o=e.data("src"),n=e.data("srcFull"),s=e.data("srcFullSl");return mobile&&void 0!==s?i=s:void 0!==n?i=n:t&&void 0!==o?i=o:e.hasClass("lazyload")||(i=e.attr("src")),i}function o(){e.removeClass("loading").css("background-image","url("+a+")").addClass("has-bg"),e.is("img")&&s.attr("src",r+"blank.gif")}var n=!1,s=e.is("img")?e:e.children("img"),a,l=new Image,d=!1,r=void 0!==imgDirDefault?imgDirDefault:"images/";return e.is("a")&&(s=e.find("img")),s.length>0&&!e.hasClass("has-bg")&&void 0!==(a=i(s))&&(e.addClass("loading"),l.onload=o(),l.src=a,n=!0),n}function loadSlideBgs(e){var t={slide:".slide, .load-bg"},e=void 0===e?$(".box-active"):e;e.find(t.slide).each(function(){setSlideBg($(this))})}function initSlides(e){function t(){function e(){var e,t;c&&(w=new Promise(function(i){window.onYouTubeIframeAPIReady=i,e=document.createElement("script"),e.src="https://www.youtube.com/iframe_api",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})),u&&(e=document.createElement("script"),e.src="https://player.vimeo.com/api/player.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t))}function t(e){var t=e.attr("id");console.log("Pause video: "+t),e.is("video")?e.get(0).pause():e.hasClass("video-yt")?f[t].pauseVideo():e.hasClass("video-vimeo")&&f[t].pause()}function i(e){t($(e.target))}function o(e){var t=e.attr("id");e.hasClass("video-yt")?(b.debug&&console.log("Adding YT Player "+t),f[t]=new YT.Player(t)):e.hasClass("video-vimeo")&&(b.debug&&console.log("Adding Vimeo Player "+t),f[t]=new Vimeo.Player(e.get(0))),e.on("pauseVideo",i)}function n(e){var t=e.target,i=$(t),n=i.is("video"),s=i.hasClass("video-yt"),a=i.hasClass("video-vimeo"),l,d,r,c=i.closest(b.slideBox),u=C.index(c),f=z[u];(s||a)&&(l=t.cloneNode(!0),d=t.parentNode,l.src=t.getAttribute("data-src"),l.classList.remove("lazyload","lazyloading"),l.classList.add("lazyloaded"),d.insertBefore(l,t),t.remove(),r=$(l),z[u].videos=c.find("video, .video-yt, .video-vimeo"),s?w.then(function(e){o(r)}):o(a?r:r))}var s=C.find("video"),a=C.find(".video-yt"),l=C.find(".video-vimeo"),r=s.length>0,c=a.length>0,u=l.length>0,f={};s.on("pauseVideo",i),e(),C.each(function(){var e=$(this),t=e.closest(b.container),i=C.index(e),o=e.find(b.slide),n=e.find("video, .video-yt, .video-vimeo"),s=o.length,a=e.find(".slide-active"),l=a.length>0,r=e.data("loop")||e.hasClass("auto-loop")||t.hasClass("auto-loop"),c=e.data("interval")?e.data("interval"):b.interval,u=t.find(".controls"),f=u.find(".prev"),g=u.find(".next"),v=u.find(".close"),m=e.find(".pager"),h=m.find("a");l||(a=o.eq(0),a.addClass("slide-active")),1===s&&g.addClass("disabled"),z[i]={slides:o,videos:n,slideCount:s,slideActive:a.length>0?a:o.eq(0),pos:a.length>0?o.index(a):0,controls:{el:u,prev:f,next:g,close:v},pager:{el:m,a:h}},r&&s>1&&setInterval(function(){d(e,"next")},c)}),b.debug&&console.log(z),document.addEventListener("lazybeforeunveil",function(e){var t=e.target,i=$(t),o=i.closest(b.slide),n,s=i.data("src");n=setSlideBg(o,!0)}),(c||u)&&document.addEventListener("lazybeforeunveil",n)}function i(){x=$(".box-active")}function o(e){e.addClass("box-active"),i(),loadSlideBgs()}function n(e){return $slideActive=e.find(".slide-active"),$slideActive}function s(e){function t(){r=n.pos+A.prev,c=n.pos+A.next,n.prevSlide=r>=0?s.eq(r):s.eq(a),n.nextSlide=c<=a?s.eq(c):s.eq(0),1===n.slideCount&&(n.nextSlide=$(),n.prevSlide=$())}var i=void 0!==e?e:C.index(x),o=void 0!==i?C.eq(i):x,n=z[i],s=n.slides,a=n.slideCount-1,l=o.find(".slide-active"),d=l.length>0,r,c;n.pos=d?s.index(l):0,t(),b.debug&&console.log("slideIndex after load {\n\tactive : \t"+n.pos+"\t\t #"+l.attr("id")+"\n\tprev : \t\t"+r+"\t\t #"+n.prevSlide.attr("id")+"\n\tnext : \t\t"+c+"\t\t #"+n.nextSlide.attr("id")+"\n}"),z[i]=n}function a(e){var t=C.eq(e),i=z[e],o=i.controls.el,n=i.controls.prev,s=i.controls.next,a=i.pager.el;i.pager.a.removeClass("active pg-item-active").eq(i.pos).addClass("pg-item-active"),0===i.prevSlide.length?n.addClass("disabled"):n.removeClass("disabled"),0===i.nextSlide.length?s.addClass("disabled"):s.removeClass("disabled")}function l(e){b.debug&&console.log("loadSlide : "+e.attr("id"));var t=e.closest(b.slideBox),i=C.index(t),o=z[i],n=e.attr("id"),l=createPath(B.path,n),d=t.find(".list-item-title").text(),r=createState(l,d);o.slides.removeClass("slide-prev slide-next playing").not(e).removeClass("slide-active"),o.videos.trigger("pauseVideo"),e.hasClass("slide-active")?e.removeClass("slide-active"):(e.addClass("slide-active"),$(document).trigger("slideChanged"),s(i),b.setPath&&loadState(r),o.prevSlide.addClass("slide-prev"),o.nextSlide.addClass("slide-next")),a(i),setScroll(t)}function d(e,t){var i=void 0!==t?t:"";e.each(function(){function e(){var e=n.slideCount-1,t=""!==i?r+A[i]:s.index($slide),a;return t>e&&(t=0),t<0&&(t=e),t!==r?(r=t,z[o].pos=r,a=s.eq(t)):a=!1,b.debug,a}var t=$(this),o=C.index(t),n=z[o],s=n.slides,a=n.slideActive,d=t.hasClass("box-browse")||t.hasClass("box-zoomed")||t.hasClass("slide-box-carousel"),r=n.pos,c;b.debug&&console.log("\nboxIndex: "+o+", "+n.slideCount+" slides,\ndir : "+i+", allowChange: "+d),d&&(c=e())&&l(c)})}function r(e){var t=y.length>0,i,o,n;return"object"==typeof e?(e.preventDefault(),i=$(e.target),o=i.closest(b.slideBox),!o.length>0&&(n=i.closest(b.container),o=n.find(b.slideBox))):o=t?y:x,b.debug,o}function c(e){d(r(e),"prev")}function u(e){d(r(e),"next")}function f(e){C.eq(e).hasClass("box-zoomed")&&(z[e].controls.prev.removeClass("widget-hide"),z[e].controls.next.removeClass("widget-hide"),z[e].controls.close.removeClass("widget-hide"))}function g(e){var t,i,n,s;void 0!==e?($(document).trigger("zoomIn"),b.debug&&console.log("Zoom In"),t=e.closest(b.slideBox),i=C.index(t),n=z[i],o(t),t.addClass("box-zoomed"),y=t,n.slides.addClass("slide-detail"),$.scrollLock(!0),e.hasClass("slide-active")||l(e),f(i)):y.length>0&&(b.debug&&console.log("Zoom Out"),t=y,s=t.find(".slide-active"),b.debug&&console.log("slideActive:"+s.attr("class")),$(document).trigger("zoomOut"),i=C.index(t),n=z[i],t.removeClass("box-zoomed"),y=$(),n.slides.removeClass("slide-detail"),t.hasClass("slide-box-carousel")||n.slides.removeClass("slide-active slide-prev slide-next"),n.videos.trigger("pauseVideo"),$.scrollLock(!1),f(i),b.setPath&&loadState(B),$("html,body").animate({scrollTop:s.offset().top-60},0),$(document).trigger("zoomedOut"))}function v(e){var t=e.find(b.slide).eq(0);o(e),g(t)}function m(){""!==hash&&(b.debug&&console.log("hash: "+hash),v($("#"+hash)))}function h(){C.on("slideBoxChange",function(e){var t=$(e.target);b.debug&&console.log("slideBoxChange event triggered"),o(t),s()}).on("prevSlide",c).on("nextSlide",u),S.on("toggleZoom",function(e){g($(e.target))}),$(document).on("slideChanged",function(){b.debug&&console.log("slideChanged event triggered")}),b.slideBoxClick?$(document).on("click",".slide-box:not(.box-zoomed)",function(e){b.debug&&console.log("\nslideBox clicked"),v($(this))}):$(document).on("click",".slide:not(.slide-detail,.slide.playing)",function(e){e.stopPropagation(),b.debug&&console.log("\nSlide clicked"),g($(this))}),$(document).on("click",".slide-detail:not(.slide.playing)",function(e){var t=$(this),i=t.parents(".slide-box"),o=t.data("archiveUrl");e.stopPropagation(),b.debug&&console.log("\nDetail slide clicked:"+t),g()}).on("click",".controls .prev",c).on("click",".controls .next",u).on("swiperight",c).on("swipeleft",u).on("click",".controls .close",function(e){e.preventDefault(),g()}).on("click",".number, .pg-item",function(e){var t=$(this),i=t.closest(b.slideBox),o=C.index(i),n=z[o].slides,s=z[o].pager.a.index(t),a=n.eq(s);e.preventDefault(),b.debug&&console.log("item clicked "+parseInt(s+1)),a.hasClass("slide-active")||l(a)}).on("keyup",function(e){switch(e.keyCode){case 27:g();break;case 37:c();break;case 39:u();break}})}if(slideBoxCm.initialized)console.log("initSlides: slideBox was already initialized.");else{var p={container:".slide-box",slideBox:".slide-box",slide:".slide",slideBoxClick:!1,setPath:!1,wrapSlides:!1,loopSlides:!1,interval:5e3,debug:!0},b="object"==typeof e?e:p,C=$(b.slideBox),x=$(),y=$(),z=[],S=C.find(b.slide),w,B=getState(),A={prev:-1,next:1};b.debug&&console.log(b)}!slideBoxCm.initialized&&C.length>0&&(t(),h(),i(),slideBoxCm.initialized=!0,console.log("initSlides: slideBox was initialized."))}var debug=void 0!==debug&&debug,mobile=void 0!==mobile&&mobile,imgDirDefault=void 0!==imgDirDefault?imgDirDefault:"assets/images/";$.scrollLock=function e(){function t(){n||(n=$("body")),s=n.css("overflow"),n.css("overflow","hidden"),o=!0}function i(){n.css("overflow",s),o=!1}var o=!1,n,s;return function e(n){arguments.length?n?t():i():o?i():t()}}();var slideBoxCm={initialized:!1};$(function(){initSlides()}),function(e,t){var i=t(e,e.document);e.lazySizes=i,"object"==typeof module&&module.exports&&(module.exports=i)}(window,function e(t,i){"use strict";if(i.getElementsByClassName){var o,n,s=i.documentElement,a=t.Date,l=t.HTMLPictureElement,d="addEventListener",r="getAttribute",c=t[d],u=t.setTimeout,f=t.requestAnimationFrame||u,g=t.requestIdleCallback,v=/^picture$/i,m=["load","error","lazyincluded","_lazyloaded"],h={},p=Array.prototype.forEach,b=function(e,t){return h[t]||(h[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),h[t].test(e[r]("class")||"")&&h[t]},C=function(e,t){b(e,t)||e.setAttribute("class",(e[r]("class")||"").trim()+" "+t)},x=function(e,t){var i;(i=b(e,t))&&e.setAttribute("class",(e[r]("class")||"").replace(i," "))},y=function(e,t,i){var o=i?d:"removeEventListener";i&&y(e,t),m.forEach(function(i){e[o](i,t)})},z=function(e,t,n,s,a){var l=i.createEvent("CustomEvent");return n||(n={}),n.instance=o,l.initCustomEvent(t,!s,!a,n),e.dispatchEvent(l),l},S=function(e,i){var o;!l&&(o=t.picturefill||n.pf)?o({reevaluate:!0,elements:[e]}):i&&i.src&&(e.src=i.src)},w=function(e,t){return(getComputedStyle(e,null)||{})[t]},B=function(e,t,i){for(i=i||e.offsetWidth;i<n.minSize&&t&&!e._lazysizesWidth;)i=t.offsetWidth,t=t.parentNode;return i},A=function(){var e,t,o=[],n=[],s=o,a=function(){var i=s;for(s=o.length?n:o,e=!0,t=!1;i.length;)i.shift()();e=!1},l=function(o,n){e&&!n?o.apply(this,arguments):(s.push(o),t||(t=!0,(i.hidden?u:f)(a)))};return l._lsFlush=a,l}(),k=function(e,t){return t?function(){A(e)}:function(){var t=this,i=arguments;A(function(){e.apply(t,i)})}},E=function(e){var t,i=0,o=n.throttleDelay,s=n.ricTimeout,l=function(){t=!1,i=a.now(),e()},d=g&&s>49?function(){g(l,{timeout:s}),s!==n.ricTimeout&&(s=n.ricTimeout)}:k(function(){u(l)},!0);return function(e){var n;(e=!0===e)&&(s=33),t||(t=!0,n=o-(a.now()-i),n<0&&(n=0),e||n<9?d():u(d,n))}},P=function(e){var t,i,o=99,n=function(){t=null,e()},s=function(){var e=a.now()-i;e<99?u(s,99-e):(g||n)(n)};return function(){i=a.now(),t||(t=u(s,99))}};!function(){var e,i={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};n=t.lazySizesConfig||t.lazysizesConfig||{};for(e in i)e in n||(n[e]=i[e]);t.lazySizesConfig=n,u(function(){n.init&&T()})}();var D=function(){var e,l,f,g,m,h,B,D,T,q,M,_,L,I,W=/^img$/i,F=/^iframe$/i,O="onscroll"in t&&!/glebot/.test(navigator.userAgent),R=0,V=0,H=0,j=-1,Y=function(e){H--,e&&e.target&&y(e.target,Y),(!e||H<0||!e.target)&&(H=0)},Z=function(e,t){var o,n=e,a="hidden"==w(i.body,"visibility")||"hidden"!=w(e,"visibility");for(D-=t,M+=t,T-=t,q+=t;a&&(n=n.offsetParent)&&n!=i.body&&n!=s;)(a=(w(n,"opacity")||1)>0)&&"visible"!=w(n,"overflow")&&(o=n.getBoundingClientRect(),a=q>o.left&&T<o.right&&M>o.top-1&&D<o.bottom+1);return a},U=function(){var t,a,d,c,u,f,v,m,p,b=o.elements;if((g=n.loadMode)&&H<8&&(t=b.length)){a=0,j++,null==L&&("expand"in n||(n.expand=s.clientHeight>500&&s.clientWidth>500?500:370),_=n.expand,L=_*n.expFactor),V<L&&H<1&&j>2&&g>2&&!i.hidden?(V=L,j=0):V=g>1&&j>1&&H<6?_:0;for(;a<t;a++)if(b[a]&&!b[a]._lazyRace)if(O)if((m=b[a][r]("data-expand"))&&(f=1*m)||(f=V),p!==f&&(h=innerWidth+f*I,B=innerHeight+f,v=-1*f,p=f),d=b[a].getBoundingClientRect(),(M=d.bottom)>=v&&(D=d.top)<=B&&(q=d.right)>=v*I&&(T=d.left)<=h&&(M||q||T||D)&&(n.loadHidden||"hidden"!=w(b[a],"visibility"))&&(l&&H<3&&!m&&(g<3||j<4)||Z(b[a],f))){if(ie(b[a]),u=!0,H>9)break}else!u&&l&&!c&&H<4&&j<4&&g>2&&(e[0]||n.preloadAfterLoad)&&(e[0]||!m&&(M||q||T||D||"auto"!=b[a][r](n.sizesAttr)))&&(c=e[0]||b[a]);else ie(b[a]);c&&!u&&ie(c)}},G=E(U),J=function(e){C(e.target,n.loadedClass),x(e.target,n.loadingClass),y(e.target,Q),z(e.target,"lazyloaded")},K=k(J),Q=function(e){K({target:e.target})},X=function(e,t){try{e.contentWindow.location.replace(t)}catch(i){e.src=t}},ee=function(e){var t,i=e[r](n.srcsetAttr);(t=n.customMedia[e[r]("data-media")||e[r]("media")])&&e.setAttribute("media",t),i&&e.setAttribute("srcset",i)},te=k(function(e,t,i,o,s){var a,l,d,c,g,m;(g=z(e,"lazybeforeunveil",t)).defaultPrevented||(o&&(i?C(e,n.autosizesClass):e.setAttribute("sizes",o)),l=e[r](n.srcsetAttr),a=e[r](n.srcAttr),s&&(d=e.parentNode,c=d&&v.test(d.nodeName||"")),m=t.firesLoad||"src"in e&&(l||a||c),g={target:e},m&&(y(e,Y,!0),clearTimeout(f),f=u(Y,2500),C(e,n.loadingClass),y(e,Q,!0)),c&&p.call(d.getElementsByTagName("source"),ee),l?e.setAttribute("srcset",l):a&&!c&&(F.test(e.nodeName)?X(e,a):e.src=a),s&&(l||c)&&S(e,{src:a})),e._lazyRace&&delete e._lazyRace,x(e,n.lazyClass),A(function(){(!m||e.complete&&e.naturalWidth>1)&&(m?Y(g):H--,J(g))},!0)}),ie=function(e){var t,i=W.test(e.nodeName),o=i&&(e[r](n.sizesAttr)||e[r]("sizes")),s="auto"==o;(!s&&l||!i||!e[r]("src")&&!e.srcset||e.complete||b(e,n.errorClass)||!b(e,n.lazyClass))&&(t=z(e,"lazyunveilread").detail,s&&N.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,H++,te(e,t,s,o,i))},oe=function(){if(!l){if(a.now()-m<999)return void u(oe,999);var e=P(function(){n.loadMode=3,G()});l=!0,n.loadMode=3,G(),c("scroll",function(){3==n.loadMode&&(n.loadMode=2),e()},!0)}};return{_:function(){m=a.now(),o.elements=i.getElementsByClassName(n.lazyClass),e=i.getElementsByClassName(n.lazyClass+" "+n.preloadClass),I=n.hFac,c("scroll",G,!0),c("resize",G,!0),t.MutationObserver?new MutationObserver(G).observe(s,{childList:!0,subtree:!0,attributes:!0}):(s[d]("DOMNodeInserted",G,!0),s[d]("DOMAttrModified",G,!0),setInterval(G,999)),c("hashchange",G,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(e){i[d](e,G,!0)}),/d$|^c/.test(i.readyState)?oe():(c("load",oe),i[d]("DOMContentLoaded",G),u(oe,2e4)),o.elements.length?(U(),A._lsFlush()):G()},checkElems:G,unveil:ie}}(),N=function(){var e,t=k(function(e,t,i,o){var n,s,a;if(e._lazysizesWidth=o,o+="px",e.setAttribute("sizes",o),v.test(t.nodeName||""))for(n=t.getElementsByTagName("source"),s=0,a=n.length;s<a;s++)n[s].setAttribute("sizes",o);i.detail.dataAttr||S(e,i.detail)}),o=function(e,i,o){var n,s=e.parentNode;s&&(o=B(e,s,o),n=z(e,"lazybeforesizes",{width:o,dataAttr:!!i}),n.defaultPrevented||(o=n.detail.width)&&o!==e._lazysizesWidth&&t(e,s,n,o))},s=function(){var t,i=e.length;if(i)for(t=0;t<i;t++)o(e[t])},a=P(s);return{_:function(){e=i.getElementsByClassName(n.autosizesClass),c("resize",a)},checkElems:a,updateElem:o}}(),T=function(){T.i||(T.i=!0,N._(),D._())};return o={cfg:n,autoSizer:N,loader:D,init:T,uP:S,aC:C,rC:x,hC:b,fire:z,gW:B,rAF:A}}});
//# sourceMappingURL=./slidebox-min.js.map